process GLOBAL =
{
   ## setup useful services
   ##
   include "Validation/GlobalHits/data/Random.cfi"
   include "Validation/GlobalHits/data/MessageLogger.cfi"
   //service = Timing { }  
   //service = SimpleMemoryCheck { untracked int32 ignoreTotal = 1 }      

   ## Step 1: Read in MC+Sim events
   ## 
   ## read in OscarProducer file
   include "Validation/GlobalHits/data/PoolSource.cfi"

   ## Step 2 :  Accumulation of globally transformed data
   ##
   ## Setup Geometry (do I need this?)
   ##
   ## can't use official yet as it is configuration.xml rather than 
   ## SimConfiguration (how to change?)
   include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
   include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"
   es_module = TrackerGeometricDetESModule {}
		
   ## Setup Magnetic Field (do I need this?)
   ##
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

   ## Accumulation of globally transformed data
   ##
   ##module globalhits
   include "Validation/GlobalHits/data/globalhits.cff"
   replace globalhits.Verbosity = 0
   replace globalhits.Frequency = 50	

   ## Step 4 : Output module
   ##
   module o1 = PoolOutputModule 
   { 
      untracked string fileName = "GlobalHits.root"
      untracked vstring outputCommands = 
      {
        "keep *_globalhits_*_*"
      }
   }

   /*
   ## strip MC out of file
   module o2 = PoolOutputModule 
   {  
      untracked string fileName = "MC.root"
      untracked vstring outputCommands = 
      {
        "keep edmHepMCProduct_*_*_*"
      }
   }
   */

   ## execute path
   ##
   path p1 = { globalhits }
   endpath outpath = { o1 }
   //endpath outpath = { o1, o2 }

}